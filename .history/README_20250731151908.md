# MySortedAppartmentSearch

Application Python pour automatiser la recherche d'appartements sur SeLoger.com avec filtrage intelligent et interface graphique.

## Fonctionnalités

- **Scraping automatisé** : Extraction des annonces depuis SeLoger.com (Dijon)
- **Filtrage intelligent** : Élimination automatique des colocations et studios
- **Interface graphique** : Visualisation des résultats avec tableaux interactifs
- **Statistiques détaillées** : Analyse des prix, surfaces, taux de validation
- **Export des données** : Sauvegarde des résultats triés

## Structure du projet

```
MySortedAppartmentSearch/
├── main.py              # Application principale complète
├── quick_start.py       # Démarrage rapide avec données existantes
├── scrapImmo.py         # Module de scraping SeLoger
├── SortScrapSearch.py   # Module de tri et filtrage
├── gui.py               # Interface graphique de base
├── requirements.txt     # Dépendances Python
├── res.json            # Données scrapées récentes
├── files/
│   └── seLoger1.json   # Données existantes
└── README.md           # Ce fichier
```

## Installation

### Option 1 : Démarrage rapide (recommandé)

Si vous avez déjà des données dans `res.json` ou `files/seLoger1.json` :

```bash
python quick_start.py
```

### Option 2 : Installation complète avec scraping

1. Installer les dépendances :
```bash
pip install -r requirements.txt
```

2. Lancer l'application complète :
```bash
python main.py
```

## Utilisation

### Démarrage rapide

Le script `quick_start.py` permet de tester l'application sans installer Scrapy :

1. Lance le script
2. Sélectionne un fichier de données disponible
3. Visualise les résultats dans l'interface graphique

### Application complète

Le script `main.py` offre le processus complet :

1. **Option 1** : Scraping + Tri + Interface
   - Lance le scraping SeLoger
   - Trie automatiquement les résultats
   - Affiche l'interface graphique

2. **Option 2** : Utiliser les données existantes
   - Charge `res.json` s'il existe
   - Trie les données
   - Affiche l'interface graphique

## Configuration

### Critères de recherche (scrapImmo.py)

- **Zone** : Dijon (codes INSEE 210292, 210231)
- **Type** : Appartements T2-T3
- **Prix** : Maximum 550€
- **Surface** : Minimum 40m²

### Critères de filtrage (SortScrapSearch.py)

**Annonces rejetées :**
- Colocations (détection par mots-clés)
- Studios (détection par mots-clés)
- Prix invalides (hors fourchette 200-800€)
- Surface insuffisante (< 30m²)

**Annonces valides :**
- Appartements classiques T2-T3
- Prix et surface dans les critères
- Pas de colocation ni studio

## Interface graphique

### Fonctionnalités

- **Onglets séparés** : Annonces valides / rejetées
- **Statistiques** : Affichage en temps réel des métriques
- **Tableaux interactifs** : Tri, recherche, colonnes redimensionnables
- **Double-clic** : Ouverture directe des liens SeLoger
- **Export** : Sauvegarde des résultats en JSON

### Colonnes affichées

- ID de l'annonce
- Prix (€)
- Type de bien
- Localisation
- Surface (m²)
- Nombre de pièces
- Équipements (balcon, parking, etc.)
- Indicateurs colocation/studio

## Données et fichiers

### Fichiers d'entrée

- `res.json` : Données récentes du scraping
- `files/seLoger1.json` : Données existantes
- `res_detailed.json` : Données avec métadonnées complètes

### Fichiers de sortie

- `resultats_tries.json` : Résultats triés avec statistiques
- `export_results_YYYYMMDD_HHMMSS.json` : Exports horodatés

## Statistiques générées

- Nombre total d'annonces analysées
- Nombre d'annonces valides/rejetées
- Taux de validation (%)
- Prix moyen des annonces valides
- Surface moyenne des annonces valides
- Répartition par motifs de rejet

## Dépendances

### Démarrage rapide
- Python 3.7+
- tkinter (inclus avec Python)
- Modules standard (json, os, sys, datetime)

### Application complète
- scrapy >= 2.5.0
- requests >= 2.25.0
- lxml >= 4.6.0
- twisted >= 21.0.0

## Utilisation recommandée

1. **Première utilisation** : `python quick_start.py` pour tester
2. **Utilisation régulière** : `python main.py` pour scraping + tri
3. **Développement** : Modifier les critères dans `SortScrapSearch.py`

## Troubleshooting

### Erreurs communes

1. **Import scrapy not found** : Utiliser `quick_start.py` ou installer les dépendances
2. **Aucun fichier de données** : Vérifier la présence de `res.json` ou `files/seLoger1.json`
3. **Interface ne s'affiche pas** : Vérifier que tkinter est installé

### Logs et debug

- Les logs du scraping sont affichés dans la console
- Les erreurs d'interface sont capturées avec messagebox
- Les statistiques de tri sont affichées automatiquement

## Personnalisation

### Modifier les critères de recherche

Éditer `scrapImmo.py` :
- Changer les codes INSEE pour d'autres villes
- Modifier la fourchette de prix
- Ajuster la surface minimale

### Modifier les critères de tri

Éditer `SortScrapSearch.py` :
- Ajouter de nouveaux mots-clés de détection
- Modifier les fourchettes de validation
- Créer de nouveaux critères de tri

### Personnaliser l'interface

Éditer `quick_start.py` ou `main.py` :
- Ajouter de nouvelles colonnes
- Modifier les couleurs et styles
- Créer de nouveaux onglets

## License

Projet personnel - Utilisation libre pour usage non commercial.